<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>KGE Technologies Pvt Ltd| Internship Request Form</title>
    <!-- Favicon Icon -->
    <!-- <link rel="shortcut icon" href="img/favicon.png" type="image/png"> -->
    <!-- ======== Font Awesome CDN ===== -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" />
    <!-- ======== font ===== -->
    <link href="https://fonts.googleapis.com/css2?family=Red+Hat+Display:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet">
    <!-- ======== Bootstrap 5 ===== -->
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
    <!-- ======== style css ===== -->
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <!-- ======== responsive css ===== -->
    <link rel="stylesheet" type="text/css" href="css/responsive.css">
    
    
</head>
<body>
    <datalist id="countryList"></datalist>
    <datalist id="cityList"></datalist>
    <header>
        <div class="container">
            <div class="row align-items-center">
                <div class="col-4">
                    <div class="logo">
                        <a href="index.html"><img src="img/kge-logo.svg" alt="kge-logo"></a>
                    </div>
                </div>
                <div class="col-8">
                    <div class="header-menu">
                        <nav>
                            <ul class="list-unstyled d-flex justify-content-end align-items-center">
                                <li><a href="index.html">Home</a></li>
                                <li><a href="faqs.html">FAQs</a></li>
                                <li><a href="certificate.html" class="site-btn">Download</a></li>
                            </ul>
                        </nav>
                        <button class="mobile-toggle-btn"><img src="img/hamburger-menu.svg" alt="hamburger-menu"></button>
                    </div>
                </div>
            </div>
        </div>
        <div class="mobile-nav-element" id="mySidenav" style="width: 0px;">
            <div class="menu">
                <nav>
                    <ul class="list-unstyled d-flex align-items-center">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="faqs.html">FAQs</a></li>
                        <li><a href="certificate.html" class="site-btn">Download</a></li>
                    </ul>
                </nav>
            </div>
            <button class="close-btn mobile-toggle-btn active"><img src="img/close_menu.svg" alt="close_menu"></button>
        </div>
    </header>

    <section class="internship-form-section py-70">
        <div class="container">
            <h1 class="divider heading-main">Internship Request at KGE Technologies Pvt Ltd</h1>
            <div class="py-70">
                <form id="msform" class="pt-70">
                    <!-- progressbar -->
                    <ul id="progressbar" class="pb-70">
                        <li class="active" id="personalDetails"><span class="step-number">1</span><br>Personal Details</li>
                        <li id="educationalDetails"><span class="step-number">2</span><br>Educational Details</li>
                        <li id="internshipInterested"><span class="step-number">3</span><br>Internship Interested Field</li>
                        <li id="internshipOption"><span class="step-number">4</span><br>Internship Option</li>
                        <li id="references"><span class="step-number">5</span><br>References</li>
                        <li id="submission"><span class="step-number">6</span><br>Submission</li>
                    </ul>
                    <fieldset>
                        <div class="form-card">
                            <h2 class="fs-title">Personal Details:</h2>
                            <div class="row pb-40">
                                <div class="col-lg-4 col-md-6 col-sm-12">
                                    <div class="input-field">
                                        <label class="fieldlabels" for="fname">First Name <span>*</span></label>
                                        <input type="text" name="fname" placeholder="First Name" value="" required maxlength="20" />
                                        <div class="error-message"></div>
                                    </div>
                                </div>
                                <div class="col-lg-4 col-md-6 col-sm-12">
                                    <div class="input-field">
                                        <label class="fieldlabels">Last Name <span>*</span></label>
                                        <input type="text" name="lname" placeholder="Last Name" value=""  maxlength="20" required/>
                                        <div class="error-message"></div>
                                    </div>
                                </div>
                                <div class="col-lg-4 col-md-6 col-sm-12">
                                    <div class="input-field">
                                        <label class="fieldlabels">Email <span>*</span></label>
                                        <input type="email" name="email" placeholder="Enter your email" value="" required/>
                                        <div class="error-message"></div>
                                    </div>
                                </div>
                                
                                <div class="col-lg-4 col-md-6 col-sm-12">
                                    <div class="input-field">
                                        <label class="fieldlabels">Contact Number <span>*</span></label>
                                        <div class="phone-field">
                                            <input type="text" name="mobilenumber" placeholder="  Mobile Number" value="" required />
                                            <div class="error-message"></div>
                                            <div class="country-code"><span><img ></span><span >+00</span></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-4 col-md-6 col-sm-12">
                                    <div class="input-field">
                                        <label class="fieldlabels">Whatsapp</label>
                                        <div class="phone-field">
                                            <input type="text" name="whatsapp" placeholder="  Whatsapp Number" value="" required/>
                                            <div class="country-code"><span><img></span>
                                            <span>+00</span></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-4 col-md-6 col-sm-12">
                                    <div class="input-field">
                                        <label class="fieldlabels">Country <span>*</span></label>
                                        <input type="text" name="country" id="country" placeholder="Enter Country" list="countryList" value="" required/>
                                        
                                        <div class="error-message"></div>
                                    </div>
                                </div>
                                <div class="col-lg-4 col-md-6 col-sm-12">
                                    <div class="input-field">
                                        <label class="fieldlabels">City <span>*</span></label>
                                        <input type="text" name="city" id="city" placeholder="Enter City" list="cityList" value="" required/>
                                        <div class="error-message"></div>
                                    </div>
                                </div>
                                <div class="col-lg-4 col-md-6 col-sm-12">
                                    <div class="input-field">
                                        <label class="fieldlabels">Zip Code <span>*</span></label>
                                        <input type="text" name="zipCode" placeholder="Zip Code"  value="" required />
                                        <div class="error-message"></div>
                                    </div>
                                </div>
                                <div class="col-lg-4 col-md-6 col-sm-12">
                                    <div class="input-field">
                                        <label class="fieldlabels">Gender<span>*</span></label>
                                        <select required>
                                            <option value="">Select Gender</option>
                                            <option value="male">Male</option>
                                            <option value="female">Female</option>
                                            <option value="transgender">Transgender</option>
                                        </select>
                                        <div class="error-message"></div>
                                    </div>
                                </div>
                            </div>
                        </div> 
                        <input type="button" name="next" class="next action-button site-btn" value="Next" />
                    </fieldset>
                    <fieldset>
                        <div class="form-card">
                            <h2 class="fs-title">Educational Details:</h2>
                            <div class="row pb-40">
                                <div class="col-lg-6 col-md-6 col-sm-12">
                                    <div class="input-field">
                                        <label class="fieldlabels">Current Degree & Branch<span>*</span></label>
                                        <input type="text" name="degree" placeholder="Your Recent Degree and Branch" value="" required />
                                        <div class="error-message"></div>
                                    </div>
                                </div>
                                <div class="col-lg-6 col-md-6 col-sm-12">
                                    <div class="input-field">
                                        <label class="fieldlabels">Passed Out <span>*</span></label>
                                        <input type="text" name="passedOut" placeholder="Enter Pass Out Year" value="" required/>
                                        <div class="error-message"></div>
                                    </div>
                                </div>
                            </div>
                        </div> 
                        <input type="button" name="previous" class="previous action-button-previous" value="Back" />
                        <input type="button" name="next" class="next action-button site-btn" value="Next" />
                    </fieldset>
                    <fieldset>
                        <div class="form-card">
                            <h2 class="fs-title">Internship interested Field:</h2>
                            <div class="row">
                                <div class="col-12">
                                    <label class="fieldlabels mb-4">Internship Looking For<span>*</span></label>
                                </div>
                                <div class="col-lg-3 col-md-6 col-sm-12">
                                    <div class="input-field radio-field">
                                        <input type="radio" id="netMVC" name="interestedField" value="netMVC" checked>
                                        <label for="netMVC" class="fieldlabels">.Net MVC</label>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-md-6 col-sm-12">
                                    <div class="input-field radio-field">
                                        <input type="radio" id="angular" name="interestedField" value="angular">
                                        <label for="angular" class="fieldlabels">Angular</label>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-md-6 col-sm-12">
                                    <div class="input-field radio-field">
                                        <input type="radio" id="bbamba" name="interestedField" value="bbamba">
                                        <label for="bbamba" class="fieldlabels">BBA/MBA</label>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-md-6 col-sm-12">
                                    <div class="input-field radio-field">
                                        <input type="radio" id="businessDevelopment" name="interestedField" value="businessDevelopment">
                                        <label for="businessDevelopment" class="fieldlabels">Business Development</label>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-md-6 col-sm-12">
                                    <div class="input-field radio-field">
                                        <input type="radio" id="digitalMarketing" name="interestedField" value="digitalMarketing">
                                        <label for="digitalMarketing" class="fieldlabels">Digital Marketing</label>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-md-6 col-sm-12">
                                    <div class="input-field radio-field">
                                        <input type="radio" id="finance" name="interestedField" value="finance">
                                        <label for="finance" class="fieldlabels">Finance</label>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-md-6 col-sm-12">
                                    <div class="input-field radio-field">
                                        <input type="radio" id="flutterAndroidIOS" name="interestedField" value="flutterAndroidIOS">
                                        <label for="flutterAndroidIOS" class="fieldlabels">Flutter/Android/IOS</label>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-md-6 col-sm-12">
                                    <div class="input-field radio-field">
                                        <input type="radio" id="hr" name="interestedField" value="hr">
                                        <label for="hr" class="fieldlabels">HR</label>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-md-6 col-sm-12">
                                    <div class="input-field radio-field">
                                        <input type="radio" id="hardware" name="interestedField" value="hardware">
                                        <label for="hardware" class="fieldlabels">Hardware</label>
                                    </div>
                                </div><div class="col-lg-3 col-md-6 col-sm-12">
                                    <div class="input-field radio-field">
                                        <input type="radio" id="htmlUI" name="interestedField" value="htmlUI">
                                        <label for="htmlUI" class="fieldlabels">Html UI</label>
                                    </div>
                                </div><div class="col-lg-3 col-md-6 col-sm-12">
                                    <div class="input-field radio-field">
                                        <input type="radio" id="IOT" name="interestedField" value="IOT">
                                        <label for="IOT" class="fieldlabels">IOT</label>
                                    </div>
                                </div><div class="col-lg-3 col-md-6 col-sm-12">
                                    <div class="input-field radio-field">
                                        <input type="radio" id="java" name="interestedField" value="java">
                                        <label for="java" class="fieldlabels">Java</label>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-md-6 col-sm-12">
                                    <div class="input-field radio-field">
                                        <input type="radio" id="laravel" name="interestedField" value="laravel">
                                        <label for="laravel" class="fieldlabels">Laravel</label>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-md-6 col-sm-12">
                                    <div class="input-field radio-field">
                                        <input type="radio" id="legalLawFirm" name="interestedField" value="legalLawFirm">
                                        <label for="legalLawFirm" class="fieldlabels">Legal / Law Firm</label>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-md-6 col-sm-12">
                                    <div class="input-field radio-field">
                                        <input type="radio" id="marketing" name="interestedField" value="marketing">
                                        <label for="marketing" class="fieldlabels">Marketing</label>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-md-6 col-sm-12">
                                    <div class="input-field radio-field">
                                        <input type="radio" id="networking" name="interestedField" value="networking">
                                        <label for="networking" class="fieldlabels">Networking</label>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-md-6 col-sm-12">
                                    <div class="input-field radio-field">
                                        <input type="radio" id="photoshop" name="interestedField" value="photoshop">
                                        <label for="photoshop" class="fieldlabels">Photoshop</label>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-md-6 col-sm-12">
                                    <div class="input-field radio-field">
                                        <input type="radio" id="php" name="interestedField" value="php">
                                        <label for="php" class="fieldlabels">Php</label>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-md-6 col-sm-12">
                                    <div class="input-field radio-field">
                                        <input type="radio" id="projectManager" name="interestedField" value="projectManager">
                                        <label for="projectManager" class="fieldlabels">Project Manager</label>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-md-6 col-sm-12">
                                    <div class="input-field radio-field">
                                        <input type="radio" id="python" name="interestedField" value="python">
                                        <label for="python" class="fieldlabels">Python</label>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-md-6 col-sm-12">
                                    <div class="input-field radio-field">
                                        <input type="radio" id="react" name="interestedField" value="react">
                                        <label for="react" class="fieldlabels">React</label>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-md-6 col-sm-12">
                                    <div class="input-field radio-field">
                                        <input type="radio" id="sql" name="interestedField" value="sql">
                                        <label for="sql" class="fieldlabels">SQL - Pl/Sql Oracle/MsSql</label>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-md-6 col-sm-12">
                                    <div class="input-field radio-field">
                                        <input type="radio" id="sales" name="interestedField" value="sales">
                                        <label for="sales" class="fieldlabels">Sales</label>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-md-6 col-sm-12">
                                    <div class="input-field radio-field">
                                        <input type="radio" id="softwareDevelopment" name="interestedField" value="softwareDevelopment">
                                        <label for="softwareDevelopment" class="fieldlabels">Software Development</label>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-md-6 col-sm-12">
                                    <div class="input-field radio-field">
                                        <input type="radio" id="testing" name="interestedField" value="testing">
                                        <label for="testing" class="fieldlabels">Testing</label>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-md-6 col-sm-12">
                                    <div class="input-field radio-field">
                                        <input type="radio" id="uiDesigner" name="interestedField" value="uiDesigner">
                                        <label for="uiDesigner" class="fieldlabels">UI Designer (Figma, etc)</label>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-md-6 col-sm-12">
                                    <div class="input-field radio-field">
                                        <input type="radio" id="webDevelopment" name="interestedField" value="webDevelopment">
                                        <label for="webDevelopment" class="fieldlabels">Web Development</label>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-md-6 col-sm-12">
                                    <div class="input-field radio-field">
                                        <input type="radio" id="other" name="interestedField" value="other">
                                        <label for="other" class="fieldlabels">Others</label>
                                    </div>
                                    <div class="input-field radio-field mb-0">
                                        <input type="text" name="otherText" id="otherText" style="display: none;">
                                        <div class="error-message interestedField-error-message"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="row py-70">
                                <div class="col-12">
                                    <h2 class="fs-title mb-3">Knowledge Requirement</h2>
                                    <label class="fieldlabels">You are comfortable working on Real-time Tasks from Day on the Above chosen Option, as we don't give training or coaching like a training institute or coaching center.</label>
                                </div>
                            </div>
                        </div>
                        <div class="interestedField-error-message"></div>
                        <input type="button" name="previous" class="previous action-button-previous" value="Back" />
                        <input type="button" name="next" class="next action-button site-btn" value="Next" />
                    </fieldset>
                    <fieldset>
                        <div class="form-card">
                            <h2 class="fs-title">Internship Option:</h2>
                            <div class="fs-title-2">
                                <h4>Please Read the Complete details below and Choose your option</h4>
                                <p>We charge a one time fee of <b>1500/-INR for Indian Students and 50USD for International Students to offer Internship,</b> this is been made a mandataory as we see 90% of the Candidates just receive offer and dont join or abscond in between without even deliver what is expected. Dont worry you will get the completion letter always.</p>
                            </div>
                            <div class="fs-title-3 pb-40">
                                <h5>What you get</h5>
                                <ul class="ps-3">
                                    <li>Offer of Internship in Company letter Head</li>
                                    <li>Internship Completion in Company Letter head</li>
                                    <li>Linkedin Recommendation</li>
                                </ul>
                            </div>
                            <div class="row">
                                <div class="col-12">
                                    <label class="fieldlabels mb-4">I am Not Comfortable with Above Conditions <span>*</span></label>
                                </div>
                                <div class="col-lg-4 col-md-6 col-sm-12">
                                    <div class="input-field radio-field">
                                        <input type="radio" id="cantpay" name="pay" value="cantpay" checked>
                                        <label for="cantpay" class="fieldlabels">I Cannot Pay</label>
                                    </div>
                                </div>
                                <div class="col-lg-4 col-md-6 col-sm-12">
                                    <div class="input-field radio-field">
                                        <input type="radio" id="canpay" name="pay" value="canpay">
                                        <label for="canpay" class="fieldlabels">I Can Pay and take Internship</label>
                                    </div>
                                </div>
                                <div class="interestedField-error-message"></div>
                            </div>
                            <div class="row">
                                <div class="col-12">
                                    <label class="fieldlabels mb-4">Internship Duration <span>*</span></label>
                                </div>
                                <div class="col-12">
                                    <div class="input-field radio-field justify-content-between">
                                        <div>
                                            <input type="radio" id="oneMonth" name="month" value="oneMonth" checked>
                                            <label for="oneMonth" class="fieldlabels">1 Month</label>
                                        </div>
                                        <div>
                                            <input type="radio" id="twoMonth" name="month" value="twoMonth">
                                            <label for="twoMonth" class="fieldlabels">2 Month</label>
                                        </div>
                                        <div>
                                            <input type="radio" id="threeMonth" name="month" value="threeMonth">
                                            <label for="threeMonth" class="fieldlabels">3 Month</label>
                                        </div>
                                        <div>
                                            <input type="radio" id="fourMonth" name="month" value="fourMonth">
                                            <label for="fourMonth" class="fieldlabels">4 Month</label>
                                        </div>
                                        <div>
                                            <input type="radio" id="fiveMonth" name="month" value="fiveMonth">
                                            <label for="fiveMonth" class="fieldlabels">5 Month</label>
                                        </div>
                                        <div>
                                            <input type="radio" id="sixMonth" name="month" value="sixMonth">
                                            <label for="sixMonth" class="fieldlabels">6 Month</label>
                                        </div>
                                        <div class="col-lg-3 col-md-6 col-sm-12">
                                            <div class="input-field radio-field">
                                                <input type="radio" id="others" name="month" value="others">
                                                <label for="others" class="fieldlabels">Other</label>
                                            </div>
                                            <div class="input-field radio-field mb-0">
                                                <input type="text" name="otherMonthText" id="otherMonthText" style="display: none;">
                                                <div class="error-message month-error-message"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="interestedField-error-message"></div>
                            </div>
                            <div class="row py-40">
                                <div class="col-md-6 col-sm-12">
                                    <div class="input-field">
                                        <label class="fieldlabels">Tentative Internship Start Date<span>*</span></label>
                                        <input type="date" name="date" placeholder="" value="" required />
                                        <div class="error-message"></div>
                                    </div>
                                </div>
                            </div>
                        </div> 
                        <input type="button" name="previous" class="previous action-button-previous" value="Back" />
                        <input type="button" name="next" class="next action-button site-btn" value="Next" />
                    </fieldset>
                    <fieldset>
                        <div class="form-card">
                            <h2 class="fs-title">References:</h2>
                            <div class="row pb-40">
                                <div class="col-sm-12">
                                    <div class="input-field">
                                        <label class="fieldlabels">How You know about the Internship in KGE Technologies Pvt Ltd <span>*</span></label>
                                        <input type="text" name="about" placeholder="" value="" required />
                                        <div class="error-message"></div>
                                    </div>
                                </div>
                            </div>
                            <h2 class="fs-title">Refer Your Circle:</h2>
                            <div class="row pb-40">
                                <div class="col-sm-12">
                                    <div class="input-field">
                                        <label class="fieldlabels">Please do provide their Email Address Or Mobile Number, each line 1 Contact</label>
                                        <textarea rows="6"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div> 
                        <input type="button" name="previous" class="previous action-button-previous" value="Back" />
                        <input type="button" name="next" class="next action-button site-btn" value="Next" />
                    </fieldset>
                    <fieldset>
                        <div class="form-card">
                            <h2 class="fs-title">Submission:</h2>
                            <div class="row pb-40">
                                <div class="col-sm-12">
                                    <div class="input-field">
                                        <label class="fieldlabels">Terms and Conditions <span>*</span></label>
                                        <textarea rows="5" class="mb-3" disabled>I Agree, that KGE Technologies Pvt Ltd contact me via Email, Call, SMS, and WhatsApp to discuss my Form Submission for the Internship</textarea>
                                        <div>
                                            <input type="checkbox" id="acceptTandC" name="acceptTandC" value="" class="w-auto" required>
                                            <label for="acceptTandC"> I accept the Terms and Conditions.</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row pb-40">
                                <div class="col-sm-12">
                                    <div class="input-field">
                                        <label class="fieldlabels">Recaptcha</label>
                                        <img src="img/recaptcha.png" alt="Recaptcha" class="d-block">
                                    </div>
                                </div>
                            </div>
                        </div> 
                        <input type="button" name="previous" class="previous action-button-previous" value="Back" />
                        <input type="submit" name="submit" class=" action-button site-btn d-block text-center float-none mx-auto" value="SUBMIT" />
                    </fieldset>
                </form>
            </div>
        </div>
    </section>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/slick.min.js"></script>
<script src="js/custom.js"></script>
<script>
  const apiKey = "9a8b9596bbff4291a2c9c467134fe7d0";
  let countryList = [];
  let selectedCountryCode = null;

  fetch("https://gist.githubusercontent.com/anubhavshrimal/75f6183458db8c453306f93521e93d37/raw/f77e7598a8503f1f70528ae1cbf9f66755698a16/CountryCodes.json")
    .then(res => res.json())
    .then(data => {
      countryList = data;
      populateCountryDatalist();
      initLocation(); 
    })
    .catch(err => {
      console.error("Country code load error:", err);
      populateCountryDatalist();
      initLocation();
    });

  function initLocation() {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(success, error);
    } else {
      error();
    }
  }

  function success(position) {
    const lat = position.coords.latitude;
    const lon = position.coords.longitude;

    const url = `https://api.geoapify.com/v1/geocode/reverse?lat=${lat}&lon=${lon}&apiKey=${apiKey}`;

    fetch(url)
      .then(response => response.json())
      .then(data => {
        const props = data.features[0].properties;
        const city = props.city || props.municipality || props.town || props.county || props.state_district || props.village || props.suburb || "NA";
        const country = props.country || "NA";
        const countryCode = props.country_code?.toUpperCase();

        document.getElementById("city").value = city;
        document.getElementById("country").value = country;

        const match = countryList.find(c => c.code === countryCode);
        const phoneCode = match ? match.dial_code : "+00";
        const flagUrl = `https://flagcdn.com/24x18/${countryCode.toLowerCase()}.png`;

        selectedCountryCode = countryCode.toLowerCase();

        document.querySelectorAll('.country-code').forEach(div => {
          const spans = div.getElementsByTagName('span');
          if (spans.length >= 2) {
            spans[1].textContent = phoneCode;
            const img = spans[0].querySelector('img');
            if (img) {
              img.src = flagUrl;
              img.alt = countryCode + " flag";
            }
          }
        });

        enableManualPhoneCodeFlagUpdate();
      })
      .catch(err => {
        console.error("Geoapify error:", err);
        error();
      });
  }

  function error() {
    console.warn("User denied location.");
    const countryInput = document.getElementById("country");
    const cityInput = document.getElementById("city");
    countryInput.removeAttribute("readonly");
    cityInput.removeAttribute("readonly");
    enableManualPhoneCodeFlagUpdate();
  }

  function enableManualPhoneCodeFlagUpdate() {
    document.querySelectorAll('.country-code span:nth-child(2)').forEach(span => {
      span.addEventListener('input', () => {
        const enteredCode = span.textContent.trim();
        const match = countryList.find(c => c.dial_code === enteredCode);
        if (match) {
          const flagUrl = `https://flagcdn.com/24x18/${match.code.toLowerCase()}.png`;
          const img = span.parentElement.querySelector('span img');
          if (img) {
            img.src = flagUrl;
            img.alt = match.code + " flag";
          }
        }
      });
    });
  }

  function populateCountryDatalist() {
    const datalist = document.getElementById("countryList");
    countryList.forEach(country => {
      const option = document.createElement("option");
      option.value = country.name;
      datalist.appendChild(option);
    });
  }

  // Always respond to country input changes to update code, flag, and city autocomplete
  document.getElementById("country").addEventListener("input", function () {
    const entered = this.value.trim().toLowerCase();
    const match = countryList.find(c => c.name.toLowerCase() === entered);
    if (match) {
      selectedCountryCode = match.code.toLowerCase();
      const phoneCode = match.dial_code;
      const flagUrl = `https://flagcdn.com/24x18/${selectedCountryCode}.png`;

      document.querySelectorAll('.country-code').forEach(div => {
        const spans = div.getElementsByTagName('span');
        if (spans.length >= 2) {
          spans[1].textContent = phoneCode;
          const img = spans[0].querySelector('img');
          if (img) {
            img.src = flagUrl;
            img.alt = match.code + " flag";
          }
        }
      });
    }
  });

  // Autocomplete city based on selected country
  document.getElementById("city").addEventListener("input", function () {
    const query = this.value.trim();
    const cityList = document.getElementById("cityList");

    if (!selectedCountryCode || query.length < 2) return;

    const geoapifyCityUrl = `https://api.geoapify.com/v1/geocode/autocomplete?text=${encodeURIComponent(query)}&type=city&filter=countrycode:${selectedCountryCode}&limit=10&apiKey=${apiKey}`;

    fetch(geoapifyCityUrl)
      .then(res => res.json())
      .then(data => {
        cityList.innerHTML = "";
        data.features.forEach(f => {
          const cityName = f.properties.city || f.properties.county || f.properties.town || f.properties.state_district;
          if (cityName) {
            const option = document.createElement("option");
            option.value = cityName;
            cityList.appendChild(option);
          }
        });
      })
      .catch(err => {
        console.error("City autocomplete error:", err);
      });
  });
</script>



</html>